<h1>graceful-fs</h1><p>graceful-fs functions as a drop-in replacement for the fs module,
making various improvements.</p>
<p>The improvements are meant to normalize behavior across different
platforms and environments, and to make filesystem access more
resilient to errors.</p>
<h2>Improvements over <a href="http://api.nodejs.org/fs.html">fs module</a></h2><p>graceful-fs:</p>
<ul>
<li>Queues up <code>open</code> and <code>readdir</code> calls, and retries them once
something closes if there is an EMFILE error from too many file
descriptors.</li>
<li>fixes <code>lchmod</code> for Node versions prior to 0.6.2.</li>
<li>implements <code>fs.lutimes</code> if possible. Otherwise it becomes a noop.</li>
<li>ignores <code>EINVAL</code> and <code>EPERM</code> errors in <code>chown</code>, <code>fchown</code> or
<code>lchown</code> if the user isn&#39;t root.</li>
<li>makes <code>lchmod</code> and <code>lchown</code> become noops, if not available.</li>
<li>retries reading a file if <code>read</code> results in EAGAIN error.</li>
</ul>
<p>On Windows, it retries renaming a file for up to one second if <code>EACCESS</code>
or <code>EPERM</code> error occurs, likely because antivirus software has locked
the directory.</p>
<h2>USAGE</h2><pre><code class="language-javascript">// use just like fs
var fs = require(&#39;graceful-fs&#39;)

// now go and do stuff with it...
fs.readFileSync(&#39;some-file-or-whatever&#39;)
</code></pre>
<h2>Global Patching</h2><p>If you want to patch the global fs module (or any other fs-like
module) you can do this:</p>
<pre><code class="language-javascript">// Make sure to read the caveat below.
var realFs = require(&#39;fs&#39;)
var gracefulFs = require(&#39;graceful-fs&#39;)
gracefulFs.gracefulify(realFs)
</code></pre>
<p>This should only ever be done at the top-level application layer, in
order to delay on EMFILE errors from any fs-using dependencies.  You
should <strong>not</strong> do this in a library, because it can cause unexpected
delays in other parts of the program.</p>
